<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ReFusion: ReFusion: 3D Reconstruction in Dynamic Environments for RGB-D Cameras Exploiting Residuals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ReFusion
   </div>
   <div id="projectbrief">3D Reconstruction in Dynamic Environments for RGB-D Cameras Exploiting Residuals</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ReFusion: 3D Reconstruction in Dynamic Environments for RGB-D Cameras Exploiting Residuals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Description</h2>
<p>The programs allows to perform RGB-D SLAM in dynamic environments. We employ an efficient direct tracking on the truncated signed distance function (TSDF) and leverage color information encoded in the TSDF to estimate the pose of the sensor. The TSDF is efficiently represented using voxel hashing, with most computations parallelized on a GPU. For detecting dynamics, we exploit the residuals obtained after an initial registration.</p>
<p>Check out the video:</p>
<p><a href="https://www.youtube.com/watch?v=1P9ZfIS5-p4&amp;feature=youtu.be" title="ReFusion Video"></a></p>
<p>For further details, see the paper: <a href="https://arxiv.org/abs/1905.02082">"ReFusion: 3D Reconstruction in Dynamic Environments for RGB-D Cameras Exploiting Residuals"</a>.</p>
<p><b>WARNING:</b> The provided code is not optimized, nor in an easy-to-read shape. It is provided "as is", as a prototype implementation of our paper. Use it at your own risk. Moreover, compared to the paper, this implementation lacks the features that make it able to deal with invalid measurements. Therefore, it will not produce good models for the <a href="https://vision.in.tum.de/data/datasets/rgbd-dataset">TUM RGB-D Benchmark</a> scenes. To test it, please use our <a href="http://www.ipb.uni-bonn.de/data/rgbd-dynamic-dataset/">Bonn RGB-D Dynamic Dataset</a></p>
<h2>Key contributors</h2>
<p>Emanuele Palazzolo (<a href="#" onclick="location.href='mai'+'lto:'+'ema'+'nu'+'ele'+'.p'+'ala'+'zz'+'olo'+'@i'+'gg.'+'un'+'i-b'+'on'+'n.d'+'e'; return false;">emanu<span style="display: none;">.nosp@m.</span>ele.<span style="display: none;">.nosp@m.</span>palaz<span style="display: none;">.nosp@m.</span>zolo<span style="display: none;">.nosp@m.</span>@igg.<span style="display: none;">.nosp@m.</span>uni-<span style="display: none;">.nosp@m.</span>bonn.<span style="display: none;">.nosp@m.</span>de</a>)</p>
<h2>Related publications</h2>
<p>If you use this code for your research, please cite:</p>
<p>Emanuele Palazzolo, Jens Behley, Philipp Lottes, Philippe Gigu√®re, Cyrill Stachniss, "ReFusion: 3D Reconstruction in Dynamic Environments for RGB-D Cameras Exploiting Residuals", <em>arXiv</em>, 2019 <a href="https://arxiv.org/pdf/1905.02082.pdf">PDF</a></p>
<p>BibTeX: </p><div class="fragment"><div class="line">@article{palazzolo2019arxiv,</div><div class="line">author = {E. Palazzolo and J. Behley and P. Lottes and P. Gigu\`ere and C. Stachniss},</div><div class="line">title = {{ReFusion: 3D Reconstruction in Dynamic Environments for RGB-D Cameras Exploiting Residuals}},</div><div class="line">journal = {arXiv},</div><div class="line">year = {2019},</div><div class="line">url = {https://arxiv.org/abs/1905.02082}</div><div class="line">}</div></div><!-- fragment --><h2>Dependencies</h2>
<ul>
<li>catkin</li>
<li>Eigen = 3.3</li>
<li>OpenCV &gt;= 2.4</li>
<li>CUDA &gt;= 9.0</li>
<li>(optional) Doxygen &gt;= 1.8.11</li>
</ul>
<h2>Installation guide</h2>
<h3>Ubuntu 16.04</h3>
<p>First, install the necessary dependencies:</p>
<ul>
<li>Install <a href="https://developer.nvidia.com/cuda-zone">CUDA</a>.</li>
<li>Install the rest of the dependencies: <div class="fragment"><div class="line">sudo apt install git libeigen3-dev libopencv-dev catkin</div></div><!-- fragment --></li>
<li>Install <a href="https://catkin-tools.readthedocs.io/en/latest/">catkin-tools</a>: <div class="fragment"><div class="line">sudo apt install python-pip</div><div class="line">sudo pip install catkin-tools</div></div><!-- fragment --></li>
<li>Finally, if you also want to build the documentation you need Doxygen installed (tested only with Doxygen 1.8.11): <div class="fragment"><div class="line">sudo apt install doxygen</div></div><!-- fragment --></li>
</ul>
<p>If you do not have a catkin workspace already, create one: </p><div class="fragment"><div class="line">cd</div><div class="line">mkdir catkin_ws</div><div class="line">cd catkin_ws</div><div class="line">mkdir src</div><div class="line">catkin init</div><div class="line">cd src</div><div class="line">git clone https://github.com/ros/catkin.git</div></div><!-- fragment --><p> Clone the repository in your catkin workspace: </p><div class="fragment"><div class="line">cd ~/catkin_ws/src</div><div class="line">git clone https://github.com/PRBonn/refusion.git</div></div><!-- fragment --><p> Then, build the project: </p><div class="fragment"><div class="line">catkin build refusion</div></div><!-- fragment --><p> Now the project root directory (e.g. <code>~/catkin_ws/src/refusion</code>) should contain a <code>bin</code> directory containing an example binary and, if Doxygen is installed, a <code>docs</code> directory containing the documentation.</p>
<h3>Ubuntu 18.04</h3>
<p>The software is not compatible with the version of Eigen shipped in Ubuntu 18.04. It is necessary to install a newer version and modify the <code>CMakeLists.txt</code> file to use it:</p><ul>
<li>Get Eigen v3.3.7: <div class="fragment"><div class="line">wget http://bitbucket.org/eigen/eigen/get/3.3.7.tar.bz2</div></div><!-- fragment --></li>
<li>Install the Eigen libraries in /usr/local <div class="fragment"><div class="line">cd eigen &amp;&amp; cmake &amp;&amp; sudo make install</div></div><!-- fragment --></li>
<li>Change line 9 of <code>CMakeLists.txt</code> from <div class="fragment"><div class="line">find_package(Eigen3 REQUIRED)</div></div><!-- fragment --> to <div class="fragment"><div class="line">find_package(Eigen3 REQUIRED PATHS /usr/local/include/)</div></div><!-- fragment --></li>
<li>Follow the installation guide for Ubuntu 16.04.</li>
</ul>
<h2>How to use it</h2>
<p>The <code>Tracker</code> class is the core of the program. Its constructor requires the options for the TSDF representation, the options for the tracker, and the intrinsic parameters of the RGB-D sensor. Use the <code>AddScan</code> member function to compute the pose of a scan and add it to the map. To visualize the result, the <code>GetCurrentPose</code> member function returns the current pose of the sensor, and the <code>GenerateRgb</code> member functions allows to create a virtual RGB image from the model. Furthermore, the <code>ExtractMesh</code> member fuction allows to create a mesh from the current model and save it as an obj file.</p>
<p>Refer to the documentation and to the source code for further details. An example that illustrates how to use the library is located in <code>src/example/example.cpp</code>.</p>
<h2>Examples / datafiles</h2>
<p>After the build process, the <code>bin</code> directory in the project root directory (e.g. <code>~/catkin_ws/src/refusion</code>) will contain an example binary. To run it execute from the command line: </p><div class="fragment"><div class="line">cd ~/catkin_ws/src/refusion/bin</div><div class="line">./refusion_example DATASET_PATH</div></div><!-- fragment --><p> where <code>DATASET_PATH</code> is the path to the directory of a dataset in the format of the <a href="https://vision.in.tum.de/data/datasets/rgbd-dataset">TUM RGB-D Benchmark</a> (e.g. <code>~/rgbd_bonn_dataset/rgbd_bonn_crowd3</code>). Some example datasets can be found <a href="http://www.ipb.uni-bonn.de/data/rgbd-dynamic-dataset/">here</a>.</p>
<p><b>Note that the directory of the dataset should contain a file called <code>associated.txt</code>, containing the association between RGB and Depth images. Such file can be created using <a href="https://svncvpr.in.tum.de/cvpr-ros-pkg/trunk/rgbd_benchmark/rgbd_benchmark_tools/src/rgbd_benchmark_tools/associate.py">this</a> Python tool:</b> </p><div class="fragment"><div class="line">python2 associate.py depth.txt rgb.txt &gt; associated.txt</div></div><!-- fragment --><h2>License</h2>
<p>This project is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License. See the LICENSE.txt file for details.</p>
<h2>Acknowledgments</h2>
<p>This work has partly been supported by the DFG under the grant number FOR 1505: Mapping on Demand, under the grant number BE 5996/1-1, and under German's Excellence Strategy EXC 2070-390732324: PhenoRob. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
